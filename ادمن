--[[
    Ø³ÙƒØ±Ø¨Øª Ø£Ø¯Ù…Ù† TX_01 - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
    Ø§Ù„Ù…ÙŠØ²Ø§Øª: ÙƒØ´Ù Ø§Ù„Ø£Ù…Ø§ÙƒÙ† (ESP)ØŒ Ù…Ø±Ø§Ù‚Ø¨Ø©ØŒ Ø·ÙŠØ±Ø§Ù†ØŒ Ù‚ÙØ²ØŒ Ø³Ø±Ø¹Ø©ØŒ Ø§Ù„Ø®.
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local StarterGui = game:GetService("StarterGui")
local LocalPlayer = Players.LocalPlayer

-- Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±
StarterGui:SetCore("SendNotification", {
	Title = "ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«";
	Text = "ØªÙ… Ø¥Ø¶Ø§ÙØ© ÙƒØ´Ù Ø§Ù„Ø£Ù…Ø§ÙƒÙ† (ESP) âœ…";
	Duration = 5;
})

--------------------------------------------------------------------
-- 1. Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (GUI Creation)
--------------------------------------------------------------------

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "TX01_AdminGui_v3"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- Ø§Ù„Ø²Ø± Ø§Ù„Ø¹Ø§Ø¦Ù…
local OpenButton = Instance.new("TextButton")
OpenButton.Name = "OpenButton"
OpenButton.Size = UDim2.new(0, 80, 0, 40)
OpenButton.Position = UDim2.new(0.05, 0, 0.1, 0)
OpenButton.BackgroundColor3 = Color3.fromRGB(0, 0, 200)
OpenButton.TextColor3 = Color3.fromRGB(255, 255, 255)
OpenButton.Text = "Ø§Ø¯Ù…Ù†"
OpenButton.TextSize = 20
OpenButton.Font = Enum.Font.FredokaOne
OpenButton.BorderSizePixel = 2
OpenButton.Visible = false
OpenButton.Parent = ScreenGui
OpenButton.ZIndex = 10

-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ù…Ø±Ø¨Ø¹Ø©)
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 330, 0, 385) -- Ø²Ø¯Ù†Ø§ Ø§Ù„Ø·ÙˆÙ„ Ù„Ø§Ø³ØªÙŠØ¹Ø§Ø¨ Ø§Ù„Ø²Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯
MainFrame.Position = UDim2.new(0.5, -165, 0.5, -192)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 40, 180)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = MainFrame

-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 35)
TitleBar.BackgroundColor3 = Color3.fromRGB(15, 30, 150)
TitleBar.Parent = MainFrame
local TitleCorner = Instance.new("UICorner") TitleCorner.CornerRadius = UDim.new(0, 10) TitleCorner.Parent = TitleBar
local TitleText = Instance.new("TextLabel")
TitleText.Size = UDim2.new(0.5, 0, 1, 0)
TitleText.Position = UDim2.new(0.05, 0, 0, 0)
TitleText.BackgroundTransparency = 1
TitleText.Text = "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­ÙƒÙ…"
TitleText.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleText.TextXAlignment = Enum.TextXAlignment.Left
TitleText.Font = Enum.Font.FredokaOne
TitleText.TextSize = 18
TitleText.Parent = TitleBar

-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚ÙÙ„ ÙˆØ§Ù„ØªØµØºÙŠØ±
local LockBtn = Instance.new("TextButton")
LockBtn.Size = UDim2.new(0, 30, 0, 30)
LockBtn.Position = UDim2.new(1, -70, 0, 2)
LockBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 0)
LockBtn.Text = "ğŸ”“"
LockBtn.Parent = TitleBar
local LockCorner = Instance.new("UICorner") LockCorner.CornerRadius = UDim.new(0,5) LockCorner.Parent = LockBtn

local MinBtn = Instance.new("TextButton")
MinBtn.Size = UDim2.new(0, 30, 0, 30)
MinBtn.Position = UDim2.new(1, -35, 0, 2)
MinBtn.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
MinBtn.Text = "â–"
MinBtn.Parent = TitleBar
local MinCorner = Instance.new("UICorner") MinCorner.CornerRadius = UDim.new(0,5) MinCorner.Parent = MinBtn

-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
local StatusFrame = Instance.new("Frame")
StatusFrame.Size = UDim2.new(1, 0, 0, 25)
StatusFrame.Position = UDim2.new(0, 0, 0, 40)
StatusFrame.BackgroundTransparency = 1
StatusFrame.Parent = MainFrame

local GreenDot = Instance.new("Frame")
GreenDot.Size = UDim2.new(0, 12, 0, 12)
GreenDot.Position = UDim2.new(0.05, 0, 0.5, -6)
GreenDot.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
GreenDot.Parent = StatusFrame
local DotCorner = Instance.new("UICorner") DotCorner.CornerRadius = UDim.new(1, 0) DotCorner.Parent = GreenDot

local OnlineLabel = Instance.new("TextLabel")
OnlineLabel.Size = UDim2.new(0.8, 0, 1, 0)
OnlineLabel.Position = UDim2.new(0.12, 0, 0, 0)
OnlineLabel.BackgroundTransparency = 1
OnlineLabel.Text = "0 Ù…ØªØµÙ„"
OnlineLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
OnlineLabel.TextXAlignment = Enum.TextXAlignment.Left
OnlineLabel.Font = Enum.Font.SourceSansBold
OnlineLabel.TextSize = 16
OnlineLabel.Parent = StatusFrame

local function UpdatePlayerCount() OnlineLabel.Text = #Players:GetPlayers() .. " Ù…ØªØµÙ„" end
Players.PlayerAdded:Connect(UpdatePlayerCount)
Players.PlayerRemoving:Connect(UpdatePlayerCount)
UpdatePlayerCount()

-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙƒØªØ§Ø¨Ø©
local InputBox = Instance.new("TextBox")
InputBox.Size = UDim2.new(0.9, 0, 0, 35)
InputBox.Position = UDim2.new(0.05, 0, 0.22, 0)
InputBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InputBox.PlaceholderText = "Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø£Ùˆ Ø§Ù„Ù‚ÙŠÙ…Ø©..."
InputBox.Text = ""
InputBox.TextColor3 = Color3.fromRGB(0, 0, 0)
InputBox.Parent = MainFrame
local InputCorner = Instance.new("UICorner") InputCorner.CornerRadius = UDim.new(0,8) InputCorner.Parent = InputBox

-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£Ø²Ø±Ø§Ø±
local ScrollContainer = Instance.new("ScrollingFrame")
ScrollContainer.Size = UDim2.new(0.9, 0, 0.6, 0) -- ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø¬Ù…
ScrollContainer.Position = UDim2.new(0.05, 0, 0.35, 0)
ScrollContainer.BackgroundTransparency = 1
ScrollContainer.ScrollBarThickness = 4
ScrollContainer.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = ScrollContainer
UIListLayout.Padding = UDim.new(0, 6)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Ø§Ù„Ø­Ù‚ÙˆÙ‚
local CreditLabel = Instance.new("TextLabel")
CreditLabel.Size = UDim2.new(1, 0, 0, 20)
CreditLabel.Position = UDim2.new(0, 0, 0.94, 0)
CreditLabel.BackgroundTransparency = 1
CreditLabel.Text = "ØªÙ… ØµÙ†Ø¹ Ø¨ÙˆØ§Ø³Ø·Ù‡ TX_01"
CreditLabel.TextColor3 = Color3.fromRGB(150, 150, 255)
CreditLabel.Font = Enum.Font.Code
CreditLabel.TextSize = 14
CreditLabel.Parent = MainFrame

--------------------------------------------------------------------
-- 2. Ø§Ù„ØªØ­Ø±ÙŠÙƒ ÙˆØ§Ù„Ù‚ÙÙ„ (Drag & Lock)
--------------------------------------------------------------------

local dragging, dragInput, dragStart, startPos
local isLocked = false

local function update(input)
	if isLocked then return end
	local delta = input.Position - dragStart
	MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

TitleBar.InputBegan:Connect(function(input)
	if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and not isLocked then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
		input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
	end
end)
TitleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
end)
UserInputService.InputChanged:Connect(function(input) if input == dragInput and dragging then update(input) end end)
LockBtn.MouseButton1Click:Connect(function()
	isLocked = not isLocked
	if isLocked then LockBtn.Text = "ğŸ”’"; LockBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
	else LockBtn.Text = "ğŸ”“"; LockBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 0) end
end)
MinBtn.MouseButton1Click:Connect(function() MainFrame.Visible = false; OpenButton.Visible = true end)
OpenButton.MouseButton1Click:Connect(function() MainFrame.Visible = true; OpenButton.Visible = false end)

--------------------------------------------------------------------
-- 3. Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙˆØªØºÙŠÙŠØ± Ø§Ù„Ø£Ù„ÙˆØ§Ù†
--------------------------------------------------------------------

local function createButton(text, order)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, 0, 0, 35)
	btn.BackgroundColor3 = Color3.fromRGB(255, 220, 0)
	btn.TextColor3 = Color3.fromRGB(0, 0, 0)
	btn.Text = text
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 18
	btn.LayoutOrder = order
	btn.Parent = ScrollContainer
	local corner = Instance.new("UICorner") corner.CornerRadius = UDim.new(0, 8) corner.Parent = btn
	return btn
end

local function toggleVisuals(btn, status)
	if status then btn.BackgroundColor3 = Color3.fromRGB(50, 200, 50); btn.Text = btn.Text:gsub("OFF", "ON")
	else btn.BackgroundColor3 = Color3.fromRGB(255, 220, 0); btn.Text = btn.Text:gsub("ON", "OFF") end
end

--------------------------------------------------------------------
-- 4. Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª (Features)
--------------------------------------------------------------------

-- 1. Ø§Ù†ØªÙ‚Ø§Ù„
local TpBtn = createButton("Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø§Ø¹Ø¨ (Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù…)", 1)
TpBtn.MouseButton1Click:Connect(function()
	local targetName = InputBox.Text
	for _, player in pairs(Players:GetPlayers()) do
		if string.sub(string.lower(player.Name), 1, string.len(targetName)) == string.lower(targetName) or 
		   string.sub(string.lower(player.DisplayName), 1, string.len(targetName)) == string.lower(targetName) then
			if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
				LocalPlayer.Character.HumanoidRootPart.CFrame = player.Character.HumanoidRootPart.CFrame
			end
		end
	end
end)

-- 2. Ø³Ø±Ø¹Ø© (Speed)
local SpeedBtn = createButton("ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ø±Ø¹Ø© (Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ù‚Ù…)", 2)
SpeedBtn.MouseButton1Click:Connect(function()
	local speed = tonumber(InputBox.Text)
	if speed and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
		LocalPlayer.Character.Humanoid.WalkSpeed = speed
		toggleVisuals(SpeedBtn, true); wait(0.5); toggleVisuals(SpeedBtn, false)
	end
end)

-- 3. Ù‚ÙØ² (Jump)
local JumpBtn = createButton("Ù‚ÙˆØ© Ø§Ù„Ù‚ÙØ² (Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ù‚Ù…)", 3)
JumpBtn.MouseButton1Click:Connect(function()
	local jump = tonumber(InputBox.Text)
	if jump and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
		LocalPlayer.Character.Humanoid.UseJumpPower = true
		LocalPlayer.Character.Humanoid.JumpPower = jump
		toggleVisuals(JumpBtn, true); wait(0.5); toggleVisuals(JumpBtn, false)
	end
end)

-- 4. Ø·ÙŠØ±Ø§Ù† (Fly)
local FlyBtn = createButton("Ø§Ù„Ø·ÙŠØ±Ø§Ù†: OFF", 4)
local flying, bv, bg = false, nil, nil
FlyBtn.MouseButton1Click:Connect(function()
	flying = not flying
	if flying then
		FlyBtn.Text = "Ø§Ù„Ø·ÙŠØ±Ø§Ù†: ON"; toggleVisuals(FlyBtn, true)
		local char = LocalPlayer.Character
		if not char or not char:FindFirstChild("HumanoidRootPart") then return end
		bv = Instance.new("BodyVelocity", char.HumanoidRootPart)
		bv.Velocity, bv.MaxForce = Vector3.new(0,0,0), Vector3.new(math.huge, math.huge, math.huge)
		bg = Instance.new("BodyGyro", char.HumanoidRootPart)
		bg.P, bg.MaxTorque, bg.CFrame = 9e4, Vector3.new(9e9, 9e9, 9e9), char.HumanoidRootPart.CFrame
		task.spawn(function()
			while flying and char:FindFirstChild("Humanoid") do
				if not bv or not bv.Parent then break end
				local cam, moveDir = Workspace.CurrentCamera, char.Humanoid.MoveDirection
				bv.Velocity = moveDir * 50 + Vector3.new(0, (UserInputService:IsKeyDown(Enum.KeyCode.Space) and 50 or 0) + (UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) and -50 or 0), 0)
				bg.CFrame = cam.CFrame
				RunService.RenderStepped:Wait()
			end
		end)
	else
		FlyBtn.Text = "Ø§Ù„Ø·ÙŠØ±Ø§Ù†: OFF"; toggleVisuals(FlyBtn, false)
		if bv then bv:Destroy() end; if bg then bg:Destroy() end
	end
end)

-- 5. Noclip
local NoclipBtn = createButton("Noclip: OFF", 5)
local noclip = false
NoclipBtn.MouseButton1Click:Connect(function()
	noclip = not noclip
	if noclip then NoclipBtn.Text = "Noclip: ON"; toggleVisuals(NoclipBtn, true)
	else NoclipBtn.Text = "Noclip: OFF"; toggleVisuals(NoclipBtn, false) end
end)
RunService.Stepped:Connect(function()
	if noclip and LocalPlayer.Character then
		for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
			if part:IsA("BasePart") and part.CanCollide then part.CanCollide = false end
		end
	end
end)

-- 6. Ù‚ÙØ² Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ
local InfJumpBtn = createButton("Ù‚ÙØ² Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ: OFF", 6)
local infJump = false
InfJumpBtn.MouseButton1Click:Connect(function()
	infJump = not infJump
	if infJump then InfJumpBtn.Text = "Ù‚ÙØ² Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ: ON"; toggleVisuals(InfJumpBtn, true)
	else InfJumpBtn.Text = "Ù‚ÙØ² Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ: OFF"; toggleVisuals(InfJumpBtn, false) end
end)
UserInputService.JumpRequest:Connect(function()
	if infJump and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
		LocalPlayer.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

-- 7. Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (Spectate)
local SpectateBtn = createButton("Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨: OFF", 7)
local isSpectating = false
SpectateBtn.MouseButton1Click:Connect(function()
	local cam = Workspace.CurrentCamera
	if not isSpectating then
		local targetName = InputBox.Text
		local found = false
		for _, player in pairs(Players:GetPlayers()) do
			if string.sub(string.lower(player.Name), 1, string.len(targetName)) == string.lower(targetName) or 
			   string.sub(string.lower(player.DisplayName), 1, string.len(targetName)) == string.lower(targetName) then
				if player.Character and player.Character:FindFirstChild("Humanoid") then
					cam.CameraSubject = player.Character.Humanoid
					isSpectating = true; found = true
					SpectateBtn.Text = "Ù…Ø±Ø§Ù‚Ø¨Ø©: " .. player.Name
					toggleVisuals(SpectateBtn, true)
					break
				end
			end
		end
		if not found then SpectateBtn.Text = "Ø§Ù„Ù„Ø§Ø¹Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"; wait(1); SpectateBtn.Text = "Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨: OFF" end
	else
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
			cam.CameraSubject = LocalPlayer.Character.Humanoid
		end
		isSpectating = false
		SpectateBtn.Text = "Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨: OFF"
		toggleVisuals(SpectateBtn, false)
	end
end)


--------------------------------------------------------------------
-- 8. ÙƒØ´Ù Ø§Ù„Ø£Ù…Ø§ÙƒÙ† (ESP/Wallhack) - Ø§Ù„Ù…ÙŠØ²Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
--------------------------------------------------------------------

local ESPBtn = createButton("ÙƒØ´Ù Ø§Ù„Ø£Ù…Ø§ÙƒÙ† (ESP): OFF", 8)
local espEnabled = false
local connections = {} -- Ù„Ø­ÙØ¸ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª

-- Ø¯Ø§Ù„Ø© Ù„ØªØ«Ø¨ÙŠØª Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ÙƒØ´Ù Ø¹Ù„Ù‰ Ø§Ù„Ù„Ø§Ø¹Ø¨
local function SetupESP(player)
	if player == LocalPlayer or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
	local char = player.Character
	local root = char.HumanoidRootPart
	
	-- Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ù…Ø³Ø¨Ù‚Ø§Ù‹
	if root:FindFirstChild("TX01_ESP") or char:FindFirstChild("TX01_Highlight") then return end

	-- 1. BillboardGui (Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙˆØ±Ø¤ÙŠØ© Ø§Ù„Ø¬Ø¯Ø±Ø§Ù†)
	local billboard = Instance.new("BillboardGui")
	billboard.Name = "TX01_ESP"
	billboard.AlwaysOnTop = true -- Ø±Ø¤ÙŠØ© Ø¹Ø¨Ø± Ø§Ù„Ø¬Ø¯Ø±Ø§Ù†!
	billboard.Size = UDim2.new(0, 100, 0, 20)
	billboard.StudsOffset = Vector3.new(0, char.Humanoid.HipHeight + 2.5, 0) -- ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø³Ù… ÙÙˆÙ‚ Ø§Ù„Ø±Ø£Ø³
	billboard.Adornee = root
	
	local textLabel = Instance.new("TextLabel")
	textLabel.Size = UDim2.new(1, 0, 1, 0)
	textLabel.Text = player.Name
	textLabel.TextColor3 = Color3.fromRGB(0, 255, 0) -- Ù„ÙˆÙ† Ø£Ø®Ø¶Ø±
	textLabel.BackgroundTransparency = 1
	textLabel.Font = Enum.Font.SourceSansBold
	textLabel.TextSize = 16
	textLabel.Parent = billboard
	
	billboard.Parent = root
	
	-- 2. Highlight (Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡)
	local highlight = Instance.new("Highlight")
	highlight.Name = "TX01_Highlight"
	highlight.OutlineColor = Color3.fromRGB(0, 255, 0)
	highlight.FillTransparency = 1 -- Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø·Ø§Ø± ÙÙ‚Ø·
	highlight.Enabled = true
	highlight.Parent = char
end

-- Ø¯Ø§Ù„Ø© Ù„Ø¥Ø²Ø§Ù„Ø© Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ÙƒØ´Ù
local function DestroyESP(player)
	if player.Character then
		local char = player.Character
		if char:FindFirstChild("HumanoidRootPart") then
			local billboard = char.HumanoidRootPart:FindFirstChild("TX01_ESP")
			if billboard then billboard:Destroy() end
		end
		local highlight = char:FindFirstChild("TX01_Highlight")
		if highlight then highlight:Destroy() end
	end
end

-- Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„ØªØ·Ø¨ÙŠÙ‚ ESP Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø®ØµÙŠØ©
local function OnCharacterAdded(character)
	if not espEnabled then return end
	local player = Players:GetPlayerFromCharacter(character)
	if player then
		-- Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ø­Ø¸Ø© Ù„Ø¶Ù…Ø§Ù† ÙˆØ¬ÙˆØ¯ HumanoidRootPart
		task.wait(0.1) 
		SetupESP(player)
	end
end

-- Ø²Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„/Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù
ESPBtn.MouseButton1Click:Connect(function()
	espEnabled = not espEnabled
	
	if espEnabled then
		-- ØªÙØ¹ÙŠÙ„: ØªØ·Ø¨ÙŠÙ‚ ESP Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠÙŠÙ†
		toggleVisuals(ESPBtn, true)
		for _, player in pairs(Players:GetPlayers()) do
			OnCharacterAdded(player.Character)
			-- Ø±Ø¨Ø· Ø§Ù„Ø­Ø¯Ø« Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´Ø®ÙŠØµ
			if player.Character then
				connections[player] = player.CharacterAdded:Connect(OnCharacterAdded)
			end
		end
		-- Ø±Ø¨Ø· Ø§Ù„Ø­Ø¯Ø« Ø¹Ù†Ø¯ Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ø§Ø¹Ø¨ Ø¬Ø¯ÙŠØ¯
		connections.PlayerAdded = Players.PlayerAdded:Connect(function(newPlayer)
			newPlayer.CharacterAdded:Connect(OnCharacterAdded)
			OnCharacterAdded(newPlayer.Character)
		end)
	else
		-- Ø¥ÙŠÙ‚Ø§Ù: Ø¥Ø²Ø§Ù„Ø© ESP Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
		toggleVisuals(ESPBtn, false)
		for _, player in pairs(Players:GetPlayers()) do
			DestroyESP(player)
			-- ÙØµÙ„ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª
			if connections[player] then connections[player]:Disconnect(); connections[player] = nil end
		end
		if connections.PlayerAdded then connections.PlayerAdded:Disconnect(); connections.PlayerAdded = nil end
	end
end)
