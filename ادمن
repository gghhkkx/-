-- TinyAdmin Full v1.0 (Ù…Ø¹ JumpPowerØŒ FlyØŒ ÙˆØ´Ø±ÙŠØ· Ø³Ø­Ø¨ Ù„Ù„ØªÙƒØ¨ÙŠØ±/Ø§Ù„ØªØµØºÙŠØ±)
-- ØµÙ†Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø©:abdarhman5641ğŸ‡ªğŸ‡¬
-- Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¶Ø¹ Ù‡Ø°Ø§ LocalScript ÙÙŠ StarterPlayer -> StarterPlayerScripts

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "TinyAdminFull"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Helper
local function safeWait(t) local s = 0; while s < (t or 0.01) do s = s + wait() end end

-- Main frame dimensions
local MAX_HEIGHT = 500 -- Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø£Ù‚ØµÙ‰ 
local MIN_HEIGHT = 40  -- Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø£Ø¯Ù†Ù‰ (ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„ØªØµØºÙŠØ±)
local DEFAULT_HEIGHT = 320 -- Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ

-- Main frame
local frame = Instance.new("Frame")
frame.Name = "MainFrame"
frame.Size = UDim2.new(0, 300, 0, DEFAULT_HEIGHT) 
frame.Position = UDim2.new(0.5, -150, 0.22, 0)
frame.AnchorPoint = Vector2.new(0.5,0)
frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.BorderSizePixel = 0
frame.Active = true
frame.Parent = gui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,10)

-- Top bar
local top = Instance.new("Frame", frame)
top.Name = "Top"
top.Size = UDim2.new(1, 0, 0, 36)
top.Position = UDim2.new(0,0,0,0)
top.BackgroundColor3 = Color3.fromRGB(40,40,40)
Instance.new("UICorner", top).CornerRadius = UDim.new(0,10)

local title = Instance.new("TextLabel", top)
title.Text = "Ø§Ø¯Ù…Ù†"
title.Font = Enum.Font.ArialBold
title.TextSize = 20
title.TextColor3 = Color3.fromRGB(255,255,255)
title.BackgroundTransparency = 1
title.Position = UDim2.new(0, 10, 0, 2)
title.Size = UDim2.new(0.6,0,1,0)
title.TextXAlignment = Enum.TextXAlignment.Left

local subtitle = Instance.new("TextLabel", top)
subtitle.Text = "Ù…ØµØ±ÙŠ%100âœ…ğŸ‡ªğŸ‡¬"
subtitle.Font = Enum.Font.Arial
subtitle.TextSize = 12
subtitle.TextColor3 = Color3.fromRGB(200,200,200)
subtitle.BackgroundTransparency = 1
subtitle.Position = UDim2.new(0, 10, 0, 18)
subtitle.Size = UDim2.new(0.45,0,1,0)
subtitle.TextXAlignment = Enum.TextXAlignment.Left

-- ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø·ÙˆØ± 
local devLabel = Instance.new("TextLabel", top)
devLabel.Text = "ØµÙ†Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø© abdarhman5641"
devLabel.Font = Enum.Font.Arial
devLabel.TextSize = 10
devLabel.TextColor3 = Color3.fromRGB(170,170,170)
devLabel.BackgroundTransparency = 1
devLabel.Position = UDim2.new(0, 10 + subtitle.TextBounds.X, 0, 18) 
devLabel.Size = UDim2.new(0.45,0,1,0)
devLabel.TextXAlignment = Enum.TextXAlignment.Left
spawn(function()
    safeWait(0.03)
    if devLabel.AbsolutePosition.X + devLabel.AbsoluteSize.X > top.AbsolutePosition.X + top.AbsoluteSize.X - 8 then
        devLabel.Position = UDim2.new(0, 10, 0, 30)
        devLabel.Size = UDim2.new(1, -20, 0, 12)
        devLabel.TextXAlignment = Enum.TextXAlignment.Left
    end
end)

local lockBtn = Instance.new("TextButton", top)
lockBtn.Text = "âŒ"
lockBtn.Font = Enum.Font.ArialBold
lockBtn.TextSize = 20
lockBtn.Size = UDim2.new(0,36,0,28)
lockBtn.Position = UDim2.new(1, -40, 0, 4)
lockBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
Instance.new("UICorner", lockBtn).CornerRadius = UDim.new(0,8)

local minBtn = Instance.new("TextButton", top)
minBtn.Text = "â–"
minBtn.Font = Enum.Font.ArialBold
minBtn.TextSize = 20
minBtn.Size = UDim2.new(0,36,0,28)
minBtn.Position = UDim2.new(1, -80, 0, 4)
minBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
Instance.new("UICorner", minBtn).CornerRadius = UDim.new(0,8)

-- Scrolling frame for content 
local content = Instance.new("ScrollingFrame", frame)
content.Name = "Content"
content.Size = UDim2.new(1, -16, 1, -84) 
content.Position = UDim2.new(0,8,0,44)
content.BackgroundTransparency = 1
content.Active = true 
content.ScrollBarThickness = 8 
content.ScrollBarImageColor3 = Color3.fromRGB(60, 60, 60) 
content.CanvasSize = UDim2.new(0, 0, 0, 200) 
content.VerticalScrollBarPosition = Enum.VerticalScrollBarPosition.Right 

-- Grid layout inside the scrolling frame
local grid = Instance.new("UIGridLayout", content)
grid.Name = "ButtonGrid"
grid.CellSize = UDim2.new(0, 88, 0, 36)
grid.CellPadding = UDim2.new(0, 6, 0, 8)
grid.HorizontalAlignment = Enum.HorizontalAlignment.Left
grid.VerticalAlignment = Enum.VerticalAlignment.Top
grid.SortOrder = Enum.SortOrder.LayoutOrder
grid.StartCorner = Enum.StartCorner.TopLeft

-- Function to update CanvasSize automatically
local function updateCanvasSize()
    safeWait(0.1)
    local contentHeight = grid.AbsoluteContentSize.Y
    content.CanvasSize = UDim2.new(0, 0, 0, contentHeight)
end

-- left column buttons (grid)
local function makeButton(txt, order)
	local b = Instance.new("TextButton", content) 
	b.LayoutOrder = order 
	b.Text = txt
	b.Font = Enum.Font.ArialBold
	b.TextSize = 15
	b.Size = UDim2.new(0, 88, 0, 36)
	b.BackgroundColor3 = Color3.fromRGB(45,45,45)
	b.TextColor3 = Color3.fromRGB(255,255,255)
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,8)
	return b
end

-- Buttons 
local order = 1
local btnFly = makeButton("Fly", order); order = order + 1 -- âœ”ï¸ Ø§Ù„Ø·ÙŠØ±Ø§Ù†
local btnNoclip = makeButton("Noclip", order); order = order + 1
local btnSpeed = makeButton("Set Speed", order); order = order + 1

local btnJump = makeButton("JumpPower", order); order = order + 1 -- âœ”ï¸ Ù‚ÙˆØ© Ø§Ù„Ù‚ÙØ²
local btnTeleport = makeButton("Teleport â†’", order); order = order + 1
local btnGiveWood = makeButton("GiveWood", order); order = order + 1

local btnInvisible = makeButton("Invisible", order); order = order + 1
local btnReset = makeButton("Reset", order); order = order + 1
local btnFreecam = makeButton("FreeCam", order); order = order + 1

local btnGiveFood = makeButton("GiveFood", order); order = order + 1
local btnBoom = makeButton("Boom", order); order = order + 1
local btnHeal = makeButton("Heal", order); order = order + 1

local btnTest1 = makeButton("Test 1", order); order = order + 1
local btnTest2 = makeButton("Test 2", order); order = order + 1
local btnTest3 = makeButton("Test 3", order); order = order + 1

updateCanvasSize()
grid:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(updateCanvasSize) 

-- Input boxes and labels
local inputBox = Instance.new("TextBox", frame)
inputBox.Size = UDim2.new(1, -16, 0, 28)
inputBox.Position = UDim2.new(0, 8, 1, -40) 
inputBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
inputBox.PlaceholderText = "Ø§ÙƒØªØ¨ Ù‚ÙŠÙ… (Ù…Ø«Ø§Ù„: 60 Ø£Ùˆ Ø§Ø³Ù… Ù„Ø§Ø¹Ø¨) Ø«Ù… Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨"
inputBox.TextColor3 = Color3.new(1,1,1)
inputBox.Font = Enum.Font.Arial
inputBox.TextSize = 14
Instance.new("UICorner", inputBox).CornerRadius = UDim.new(0,8)

--------------------------------------------------------------------------------
-- Ù…Ù‚Ø¨Ø¶ Ø³Ø­Ø¨ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù… (Resize Handle)
--------------------------------------------------------------------------------
local resizeHandle = Instance.new("Frame", frame)
resizeHandle.Name = "ResizeHandle"
resizeHandle.Size = UDim2.new(1, 0, 0, 12) 
resizeHandle.Position = UDim2.new(0, 0, 1, -12)
resizeHandle.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
resizeHandle.Active = true
resizeHandle.ZIndex = 2 

-- Ù…Ø¤Ø´Ø± Ø¨ØµØ±ÙŠ Ù„Ù„Ù…Ù‚Ø¨Ø¶ (ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡ Ù„ÙŠÙƒÙˆÙ† Ø£ÙˆØ¶Ø­)
local handleIcon = Instance.new("TextLabel", resizeHandle)
handleIcon.Text = "â¬†ï¸ Ù„ÙÙˆÙ‚ Ù„Ù„ØªØµØºÙŠØ± | Ù„ØªØ­Øª Ù„Ù„ØªÙƒØ¨ÙŠØ± â¬‡ï¸" -- Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
handleIcon.BackgroundTransparency = 1
handleIcon.TextColor3 = Color3.fromRGB(150, 150, 150)
handleIcon.Font = Enum.Font.Arial
handleIcon.TextSize = 10
handleIcon.Position = UDim2.new(0.5, 0, 0.5, 0)
handleIcon.AnchorPoint = Vector2.new(0.5, 0.5)
handleIcon.Size = UDim2.new(1,0,1,0)

-- Ù…Ù†Ø·Ù‚ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø¥Ø·Ø§Ø± Ø¨Ø§Ù„Ø³Ø­Ø¨
local isResizing = false
local resizeStartPos

local function resizeInputBegan(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        isResizing = true
        resizeStartPos = input.Position
        
        -- Ø¥ÙŠÙ‚Ø§Ù Ù…Ù†Ø·Ù‚ Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ù…Ø¤Ù‚ØªÙ‹Ø§
        dragging = false
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                isResizing = false
            end
        end)
    end
end

local function resizeInputChanged(input)
    if isResizing and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local deltaY = input.Position.Y - resizeStartPos.Y
        local currentHeight = frame.AbsoluteSize.Y
        
        -- Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„Ø£Ø¹Ù„Ù‰ (Y ØªÙ‚Ù„) ÙŠØµØºØ± (NewHeight ØªÙ‚Ù„)
        -- Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„Ø£Ø³ÙÙ„ (Y ØªØ²ÙŠØ¯) ÙŠÙƒØ¨Ø± (NewHeight ØªØ²ÙŠØ¯)
        local newHeight = currentHeight + deltaY 
        
        -- Ø§Ù„ØªÙ‚ÙŠÙŠØ¯ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ ÙˆØ§Ù„Ø£Ù‚ØµÙ‰
        newHeight = math.clamp(newHeight, MIN_HEIGHT, MAX_HEIGHT)
        
        -- ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… TweenService Ù„Ù„Ù†Ø¹ÙˆÙ…Ø©
        local tweenInfo = TweenInfo.new(0.05, Enum.EasingStyle.Linear, Enum.EasingDirection.Out, 0, false, 0)
        local goal = {Size = UDim2.new(frame.Size.X.Scale, frame.Size.X.Offset, 0, newHeight)}
        TweenService:Create(frame, tweenInfo, goal):Play()

        -- ØªØ­Ø¯ÙŠØ« Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ù„Ø³Ø­Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        resizeStartPos = input.Position
    end
end

resizeHandle.InputBegan:Connect(resizeInputBegan)
UserInputService.InputChanged:Connect(resizeInputChanged)
--------------------------------------------------------------------------------

-- mini icon when locked
local miniIcon = Instance.new("TextButton")
miniIcon.Parent = gui
miniIcon.Size = UDim2.new(0, 100, 0, 40)
miniIcon.Position = UDim2.new(0.5, -50, 0.85, 0)
miniIcon.AnchorPoint = Vector2.new(0.5,0)
miniIcon.Text = "Ø§Ø¯Ù…Ù†"
miniIcon.Font = Enum.Font.ArialBold
miniIcon.TextSize = 18
miniIcon.BackgroundColor3 = Color3.fromRGB(30,30,30)
miniIcon.TextColor3 = Color3.new(1,1,1)
miniIcon.Visible = false
Instance.new("UICorner", miniIcon).CornerRadius = UDim.new(0,10)
miniIcon.Active = true
miniIcon.Draggable = true

-- Drag logic for frame (touch+mouse)
local dragging = false
local dragStartPos, frameStartPos

local function onInputBegan(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        if not isResizing then
            dragging = true
            dragStartPos = input.Position
            frameStartPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
	end
end

local function onInputChanged(input)
	if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
		local delta = input.Position - dragStartPos
		frame.Position = UDim2.new(frameStartPos.X.Scale, frameStartPos.X.Offset + delta.X, frameStartPos.Y.Scale, frameStartPos.Y.Offset + delta.Y)
	end
end

top.InputBegan:Connect(onInputBegan)
UserInputService.InputChanged:Connect(onInputChanged)

-- lock / minimize behavior
local isLocked = false
local isMin = false

lockBtn.MouseButton1Click:Connect(function()
	isLocked = not isLocked
	frame.Visible = not isLocked
	miniIcon.Visible = isLocked
end)

miniIcon.MouseButton1Click:Connect(function()
	isLocked = false
	frame.Visible = true
	miniIcon.Visible = false
end)

minBtn.MouseButton1Click:Connect(function()
	isMin = not isMin
    local targetHeight = isMin and MIN_HEIGHT or DEFAULT_HEIGHT
    
    local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out, 0, false, 0)
    local goal = {Size = UDim2.new(frame.Size.X.Scale, frame.Size.X.Offset, 0, targetHeight)}
    
    TweenService:Create(frame, tweenInfo, goal):Play()
    
	content.Visible = not isMin
	inputBox.Visible = not isMin
    resizeHandle.Visible = not isMin 

	minBtn.Text = isMin and "â•" or "â–"
end)

-- get character helper
local function getChar()
	return player.Character or player.CharacterAdded:Wait()
end

local function getHumanoid()
	local ch = getChar()
	return ch:FindFirstChildOfClass("Humanoid")
end

local function getRoot()
	local ch = getChar()
	return ch:FindFirstChild("HumanoidRootPart") or ch:FindFirstChild("Torso") or ch:FindFirstChild("LowerTorso")
end

-- 1) Speed 
btnSpeed.MouseButton1Click:Connect(function()
	local num = tonumber(inputBox.Text)
	local hum = getHumanoid()
	if num and hum then
		pcall(function() hum.WalkSpeed = num end)
		inputBox.Text = ""
		game.StarterGui:SetCore("SendNotification", {Title="Speed", Text="Set to "..tostring(num)})
	else
		game.StarterGui:SetCore("SendNotification", {Title="Speed", Text="Ø§ÙƒØªØ¨ Ø±Ù‚Ù… ØµØ§Ù„Ø­ ÙÙŠ Ø§Ù„Ù…Ø±Ø¨Ø¹"})
	end
end)

-- 2) JumpPower (Ù…ÙŠØ²Ø© Ù…Ø·Ù„ÙˆØ¨Ø© ÙˆÙ…ÙˆØ¬ÙˆØ¯Ø©)
btnJump.MouseButton1Click:Connect(function()
	local num = tonumber(inputBox.Text)
	local hum = getHumanoid()
	if num and hum then
		pcall(function() hum.JumpPower = num end)
		inputBox.Text = ""
		game.StarterGui:SetCore("SendNotification", {Title="JumpPower", Text="Set to "..tostring(num)})
	else
		game.StarterGui:SetCore("SendNotification", {Title="JumpPower", Text="Ø§ÙƒØªØ¨ Ø±Ù‚Ù… ØµØ§Ù„Ø­"})
	end
end)

-- 3) Teleport 
btnTeleport.MouseButton1Click:Connect(function()
	local targetName = inputBox.Text:lower()
	if targetName == "" then
		game.StarterGui:SetCore("SendNotification", {Title="Teleport", Text="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ù„Ø§Ø¹Ø¨ ÙÙŠ Ø§Ù„Ù…Ø±Ø¨Ø¹"})
		return
	end
	local found
	for _, pl in pairs(Players:GetPlayers()) do
		if pl.Name:lower():find(targetName) or (pl.DisplayName and pl.DisplayName:lower():find(targetName)) then
			found = pl
			break
		end
	end
	if found and found.Character and found.Character:FindFirstChild("HumanoidRootPart") then
		local root = getRoot()
		if root then
			pcall(function()
				root.CFrame = found.Character.HumanoidRootPart.CFrame + Vector3.new(0,3,0)
			end)
			game.StarterGui:SetCore("SendNotification", {Title="Teleport", Text="ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ "..found.Name})
		end
	else
		game.StarterGui:SetCore("SendNotification", {Title="Teleport", Text="Ø§Ù„Ù„Ø§Ø¹Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ ØºÙŠØ± Ù…ØªØ§Ø­"})
	end
end)

-- 4) Noclip (local) toggle
local noclipOn = false
local noclipConn
btnNoclip.MouseButton1Click:Connect(function()
	noclipOn = not noclipOn
	if noclipOn then
		noclipConn = RunService.Stepped:Connect(function()
			local ch = player.Character
			if ch then
				for _, part in pairs(ch:GetDescendants()) do
					if part:IsA("BasePart") then
						part.CanCollide = false
					end
				end
			end
		end)
		btnNoclip.Text = "Noclipâœ“"
		game.StarterGui:SetCore("SendNotification", {Title="Noclip", Text="Ù…ÙØ¹Ù„ (Ù…Ø­Ù„ÙŠ)"})
	else
		if noclipConn then noclipConn:Disconnect(); noclipConn = nil end
		local ch = player.Character
		if ch then
			for _, part in pairs(ch:GetDescendants()) do
				if part:IsA("BasePart") then
					part.CanCollide = true
				end
			end
		end
		btnNoclip.Text = "Noclip"
		game.StarterGui:SetCore("SendNotification", {Title="Noclip", Text="ØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù"})
	end
end)

-- 5) Fly (local) toggle (Ù…ÙŠØ²Ø© Ù…Ø·Ù„ÙˆØ¨Ø© ÙˆÙ…ÙˆØ¬ÙˆØ¯Ø©)
local flying = false
local flyBV, flyBG
local flySpeed = 60

local flyConn
local function startFly()
	if flying then return end
	local char = getChar()
	local hum = getHumanoid()
	local root = getRoot()
	if not (char and hum and root) then return end
	flying = true
	hum.PlatformStand = true
	flyBV = Instance.new("BodyVelocity", root)
	flyBG = Instance.new("BodyGyro", root)
	flyBV.MaxForce = Vector3.new(9e5,9e5,9e5)
	flyBG.MaxTorque = Vector3.new(9e5,9e5,9e5)
	flyBG.P = 10000
	flyConn = RunService.RenderStepped:Connect(function()
		if not flying then return end
		local cam = workspace.CurrentCamera
		local move = Vector3.new()
		if UserInputService:IsKeyDown(Enum.KeyCode.W) then move = move + cam.CFrame.LookVector end
		if UserInputService:IsKeyDown(Enum.KeyCode.S) then move = move - cam.CFrame.LookVector end
		if UserInputService:IsKeyDown(Enum.KeyCode.A) then move = move - cam.CFrame.RightVector end
		if UserInputService:IsKeyDown(Enum.KeyCode.D) then move = move + cam.CFrame.RightVector end
		if UserInputService:IsKeyDown(Enum.KeyCode.Space) then move = move + Vector3.new(0,1,0) end
		if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) or UserInputService:IsKeyDown(Enum.KeyCode.C) then move = move - Vector3.new(0,1,0) end
		if move.Magnitude > 0 then
			flyBV.Velocity = move.Unit * flySpeed
		else
			flyBV.Velocity = Vector3.new(0,0,0)
		end
		flyBG.CFrame = workspace.CurrentCamera.CFrame
	end)
	btnFly.Text = "Stop Fly"
	game.StarterGui:SetCore("SendNotification", {Title="Fly", Text="Ø·ÙŠØ±Ø§Ù† Ù…ÙØ¹Ù„ (Ø§Ø¶ØºØ· Fly Ù„Ø¥ÙŠÙ‚Ø§Ù)"})
end

local function stopFly()
	if not flying then return end
	flying = false
	local hum = getHumanoid()
	if hum then pcall(function() hum.PlatformStand = false end) end
	if flyConn then flyConn:Disconnect(); flyConn = nil end
	if flyBV then flyBV:Destroy(); flyBV = nil end
	if flyBG then flyBG:Destroy(); flyBG = nil end
	btnFly.Text = "Fly"
	game.StarterGui:SetCore("SendNotification", {Title="Fly", Text="ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø·ÙŠØ±Ø§Ù†"})
end

btnFly.MouseButton1Click:Connect(function()
	if flying then stopFly() else startFly() end
end)

-- 6) GiveWood & GiveFood 
local function spawnLocalItem(name)
	local root = getRoot()
	if not root then return end
	local part = Instance.new("Part")
	part.Size = Vector3.new(1,1,1)
	part.Shape = Enum.PartType.Block
	part.Anchored = false
	part.CanCollide = false
	part.Material = Enum.Material.Wood
	part.Name = name
	part.CFrame = root.CFrame * CFrame.new(0,2,0)
	part.Parent = workspace
	local weld = Instance.new("WeldConstraint", part)
	local handle = root
	if root then
		weld.Part0 = part
		weld.Part1 = root
	end
	game.Debris:AddItem(part, 20)
end

btnGiveWood.MouseButton1Click:Connect(function()
	spawnLocalItem("Wood")
	game.StarterGui:SetCore("SendNotification", {Title="GiveWood", Text="Ø®Ø´Ø¨ Ù…Ø­Ù„ÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡"})
end)

btnGiveFood.MouseButton1Click:Connect(function()
	spawnLocalItem("Food")
	game.StarterGui:SetCore("SendNotification", {Title="GiveFood", Text="Ø·Ø¹Ø§Ù… Ù…Ø­Ù„ÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡"})
end)

-- 7) Invisible 
local invisibleOn = false
btnInvisible.MouseButton1Click:Connect(function()
	invisibleOn = not invisibleOn
	local ch = player.Character
	if not ch then return end
	if invisibleOn then
		for _, v in pairs(ch:GetDescendants()) do
			if v:IsA("BasePart") then
				v.LocalTransparencyModifier = 1
			elseif v:IsA("Decal") or v:IsA("Texture") then
				v.Transparency = 1
			end
		end
		btnInvisible.Text = "Invisibleâœ“"
		game.StarterGui:SetCore("SendNotification", {Title="Invisible", Text="Ø§Ø®ÙÙŠØª Ø´Ø®ØµÙŠØªÙƒ Ù…Ø­Ù„ÙŠØ§Ù‹"})
	else
		for _, v in pairs(ch:GetDescendants()) do
			if v:IsA("BasePart") then
				v.LocalTransparencyModifier = 0
			elseif v:IsA("Decal") or v:IsA("Texture") then
				v.Transparency = 0
			end
		end
		btnInvisible.Text = "Invisible"
		game.StarterGui:SetCore("SendNotification", {Title="Invisible", Text="Ø£Ø¹Ø¯Øª Ø§Ù„Ø¸Ù‡ÙˆØ± Ù…Ø­Ù„ÙŠØ§Ù‹"})
	end
end)

-- 8) Reset 
btnReset.MouseButton1Click:Connect(function()
	local hum = getHumanoid()
	if hum then
		pcall(function() hum.Health = 0 end)
		game.StarterGui:SetCore("SendNotification", {Title="Reset", Text="ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø·"})
	end
end)

-- 9) FreeCam 
local freecam = false
local savedCameraType, savedCameraSubject, savedCameraCFrame
local fcConn

btnFreecam.MouseButton1Click:Connect(function()
	freecam = not freecam
	if freecam then
		local cam = workspace.CurrentCamera
		savedCameraType = cam.CameraType
		savedCameraSubject = cam.CameraSubject
		savedCameraCFrame = cam.CFrame
		cam.CameraType = Enum.CameraType.Scriptable
		fcConn = RunService.RenderStepped:Connect(function(dt)
			local move = Vector3.new()
			if UserInputService:IsKeyDown(Enum.KeyCode.W) then move = move + cam.CFrame.LookVector end
			if UserInputService:IsKeyDown(Enum.KeyCode.S) then move = move - cam.CFrame.LookVector end
			if UserInputService:IsKeyDown(Enum.KeyCode.A) then move = move - cam.CFrame.RightVector end
			if UserInputService:IsKeyDown(Enum.KeyCode.D) then move = move + cam.CFrame.RightVector end
			if UserInputService:IsKeyDown(Enum.KeyCode.Space) then move = move + Vector3.new(0,1,0) end
			if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then move = move - Vector3.new(0,1,0) end
			cam.CFrame = cam.CFrame + move * (50 * dt)
			local delta = UserInputService:GetMouseDelta()
			if delta.Magnitude > 0 then
				local ang = CFrame.Angles(0, -delta.X * 0.0025, 0) * CFrame.Angles(-delta.Y * 0.0025, 0, 0)
				cam.CFrame = cam.CFrame * ang
			end
		end)
		btnFreecam.Text = "FreeCamâœ“"
		game.StarterGui:SetCore("SendNotification", {Title="FreeCam", Text="Camera detached"})
	else
		local cam = workspace.CurrentCamera
		if fcConn then fcConn:Disconnect(); fcConn = nil end
		if savedCameraType then
			cam.CameraType = savedCameraType
		end
		if savedCameraSubject then
			cam.CameraSubject = savedCameraSubject
		end
		if savedCameraCFrame then
			pcall(function() cam.CFrame = savedCameraCFrame end)
		end
		btnFreecam.Text = "FreeCam"
		game.StarterGui:SetCore("SendNotification", {Title="FreeCam", Text="Camera restored"})
	end
end)

-- 10) Boom 
btnBoom.MouseButton1Click:Connect(function()
	local root = getRoot()
	if not root then return end
	local pos = root.Position
	local ex = Instance.new("Explosion")
	ex.Position = pos
	ex.BlastPressure = 0
	ex.BlastRadius = 8
	ex.Visible = true
	ex.Parent = workspace
	local p = Instance.new("Part")
	p.Transparency = 1
	p.Anchored = true
	p.CanCollide = false
	p.CFrame = CFrame.new(pos)
	p.Parent = workspace
	local ps = Instance.new("ParticleEmitter", p)
	ps.Rate = 2000
	ps.Lifetime = NumberRange.new(0.4)
	ps.Speed = NumberRange.new(40)
	ps.VelocitySpread = 180
	game.Debris:AddItem(p, 1.2)
	game.StarterGui:SetCore("SendNotification", {Title="Boom", Text="Ø§Ù†ÙØ¬Ø§Ø± Ø¨ØµØ±ÙŠ (Ù…Ø­Ù„ÙŠ)"})
end)

-- 11) Heal
btnHeal.MouseButton1Click:Connect(function()
	local hum = getHumanoid()
	if hum then
		pcall(function() hum.Health = hum.MaxHealth end)
		game.StarterGui:SetCore("SendNotification", {Title="Heal", Text="ØªÙ… Ø§Ù„Ø´ÙØ§Ø¡"})
	end
end)

-- Clean up / ensure humanoid reference on respawn
player.CharacterAdded:Connect(function()
	safeWait(0.2)
	if not invisibleOn then
		local ch = player.Character
		if ch then
			for _, v in pairs(ch:GetDescendants()) do
				if v:IsA("BasePart") then
					v.LocalTransparencyModifier = 0
				end
			end
		end
	end
end)

-- Small UX: press Enter on input to trigger best-guess action
inputBox.FocusLost:Connect(function(enter)
	if not enter then return end
	local s = inputBox.Text
	if s == "" then return end
	local n = tonumber(s)
	if n then
		local hum = getHumanoid()
		if hum then pcall(function() hum.WalkSpeed = n end) end
		game.StarterGui:SetCore("SendNotification", {Title="Speed", Text="Set to "..tostring(n)})
		inputBox.Text = ""
		return
	end
	if s:lower():sub(1,3) == "tp " then
		local name = s:sub(4)
		inputBox.Text = name
		btnTeleport:MouseButton1Click()
		inputBox.Text = ""
		return
	end
	for _, pl in pairs(Players:GetPlayers()) do
		if pl.Name:lower():find(s:lower()) or (pl.DisplayName and pl.DisplayName:lower():find(s:lower())) then
			local target = pl
			if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
				local root = getRoot()
				if root then pcall(function() root.CFrame = target.Character.HumanoidRootPart.CFrame + Vector3.new(0,3,0) end) end
				game.StarterGui:SetCore("SendNotification", {Title="Teleport", Text="To "..target.Name})
				inputBox.Text = ""
				return
			end
		end
	end
	game.StarterGui:SetCore("SendNotification", {Title="Input", Text="Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù…Ø± ÙÙŠ Ø§Ù„Ø­Ù‚Ù„"})
end)

-- Final note for user
print("TinyAdminFull loaded - Ø§Ù„Ø¹Ø¨Ø¯ ğŸ‡ªğŸ‡¬")
game.StarterGui:SetCore("SendNotification", {Title="TinyAdmin", Text="ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª â€” ØµÙ†Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø© abdarhman5641"})
